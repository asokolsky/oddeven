Problem Statement:
https://gist.github.com/nate-onesignal/23668cf3bed0f234529f641bdc2d4cde
